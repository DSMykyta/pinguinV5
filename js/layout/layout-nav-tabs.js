// js/layout/layout-nav-tabs.js

/**
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                        Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ’ĞšĞ›ĞĞ”ĞĞš (TABS)                            â•‘
 * â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
 * â•‘                                                                          â•‘
 * â•‘  ĞŸĞµÑ€ĞµĞ¼Ğ¸ĞºĞ°Ñ” Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸ Ğ¿Ğ¾ ĞºĞ»Ñ–ĞºÑƒ. Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ” data-Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¸.                 â•‘
 * â•‘                                                                          â•‘
 * â•‘  ğŸ“‹ HTML Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ:                                                      â•‘
 * â•‘  <div data-tabs-container>                                               â•‘
 * â•‘    <button data-tab-target="tab-id">...</button>   â† Ñ‚Ñ€Ğ¸Ğ³ĞµÑ€             â•‘
 * â•‘  </div>                                                                  â•‘
 * â•‘  <div data-tab-content="tab-id">...</div>          â† ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚            â•‘
 * â•‘                                                                          â•‘
 * â•‘  ğŸ“‹ ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ:                                                             â•‘
 * â•‘  â”œâ”€â”€ ĞŸĞµÑ€ÑˆĞ° Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ° Ğ°ĞºÑ‚Ğ¸Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾                               â•‘
 * â•‘  â”œâ”€â”€ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ Ñ‚Ñ€Ğ¸Ğ³ĞµÑ€ Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ” ĞºĞ»Ğ°Ñ .active                                â•‘
 * â•‘  â””â”€â”€ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ” ĞºĞ»Ğ°Ñ .active                               â•‘
 * â•‘                                                                          â•‘
 * â•‘  ğŸ¯ Ğ’Ğ˜ĞšĞĞ Ğ˜Ğ¡Ğ¢ĞĞĞĞ¯:                                                        â•‘
 * â•‘  import { initTabs } from './layout/layout-main.js';                     â•‘
 * â•‘  initTabs();           // Ğ´Ğ»Ñ Ğ²ÑÑŒĞ¾Ğ³Ğ¾ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°                           â•‘
 * â•‘  initTabs(container);  // Ğ»Ğ¸ÑˆĞµ Ğ²ÑĞµÑ€ĞµĞ´Ğ¸Ğ½Ñ– ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ° (Ğ½Ğ°Ğ¿Ñ€. Ğ¼Ğ¾Ğ´Ğ°Ğ»)        â•‘
 * â•‘                                                                          â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ĞŸĞ£Ğ‘Ğ›Ğ†Ğ§ĞĞ• API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * Ğ†Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·ÑƒÑ” Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸ Ğ²ÑĞµÑ€ĞµĞ´Ğ¸Ğ½Ñ– Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°.
 * Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ” Ğ´ĞµĞ»ĞµĞ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿Ğ¾Ğ´Ñ–Ğ¹ Ğ´Ğ»Ñ Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ¸ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ğ¸Ñ… Ñ‚Ğ°Ğ±Ñ–Ğ².
 * @param {HTMLElement} container - DOM-ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚, Ğ² ÑĞºĞ¾Ğ¼Ñƒ ÑˆÑƒĞºĞ°Ñ‚Ğ¸ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸ (Ğ·Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼ document).
 */
export function initTabs(container = document) {
    const tabContainers = container.querySelectorAll('[data-tabs-container]');

    tabContainers.forEach(tabContainer => {
        // ĞĞºÑ‚Ğ¸Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ¿ĞµÑ€ÑˆÑƒ Ğ²ĞºĞ»Ğ°Ğ´ĞºÑƒ Ğ·Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼
        const firstTab = tabContainer.querySelector('[data-tab-target]');
        if (firstTab) {
            activateTab(firstTab);
        }

        // Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ´ĞµĞ»ĞµĞ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿Ğ¾Ğ´Ñ–Ğ¹ Ğ´Ğ»Ñ Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ¸ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ğ¸Ñ… Ñ‚Ğ°Ğ±Ñ–Ğ²
        tabContainer.addEventListener('click', (e) => {
            const clickedTab = e.target.closest('[data-tab-target]');
            if (!clickedTab) return;

            e.preventDefault();
            activateTab(clickedTab);
        });
    });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Ğ’ĞĞ£Ğ¢Ğ Ğ†Ğ¨ĞĞ¯ Ğ›ĞĞ“Ğ†ĞšĞ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * ĞĞºÑ‚Ğ¸Ğ²ÑƒÑ” Ğ²Ğ¸Ğ±Ñ€Ğ°Ğ½Ñƒ Ğ²ĞºĞ»Ğ°Ğ´ĞºÑƒ Ñ‚Ğ° Ñ—Ñ— ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚.
 * @param {HTMLElement} selectedTab - Ğ•Ğ»ĞµĞ¼ĞµĞ½Ñ‚ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸, ÑĞºÑƒ Ğ½Ğ°Ñ‚Ğ¸ÑĞ½ÑƒĞ»Ğ¸.
 */
function activateTab(selectedTab) {
    const targetId = selectedTab.dataset.tabTarget;
    const targetContent = document.querySelector(`[data-tab-content="${targetId}"]`);

    // Ğ”ĞµĞ°ĞºÑ‚Ğ¸Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ²ÑÑ– Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸ Ğ² Ñ‚Ğ¾Ğ¼Ñƒ ÑĞ°Ğ¼Ğ¾Ğ¼Ñƒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ–
    const tabContainer = selectedTab.closest('[data-tabs-container]');
    if (tabContainer) {
        tabContainer.querySelectorAll('[data-tab-target]').forEach(t => t.classList.remove('active'));
    }

    // Ğ”ĞµĞ°ĞºÑ‚Ğ¸Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ²ĞµÑÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ (ÑˆÑƒĞºĞ°Ñ”Ğ¼Ğ¾ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾)
    document.querySelectorAll('.tab-content.active').forEach(content => {
        content.classList.remove('active');
    });

    // ĞĞºÑ‚Ğ¸Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ñ–
    selectedTab.classList.add('active');
    if (targetContent) {
        targetContent.classList.add('active');
    }
}
