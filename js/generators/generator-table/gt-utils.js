// js/generators/generator-table/gt-utils.js

/*
 * ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
 * ‚ïë                 TABLE GENERATOR ‚Äî –£–¢–ò–õ–Ü–¢–ò (UTILS)                       ‚ïë
 * ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
 * ‚ïë  üõ†Ô∏è –£–¢–ò–õ–Ü–¢–ê ‚Äî –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –æ—á–∏—â–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É, debounce –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞      ‚ïë
 * ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
 */

import { debounce } from '../../utils/common-utils.js';
import { showToast } from '../../components/feedback/toast.js';

/**
 * –ö–æ–ø—ñ—é—î –ø–µ—Ä–µ–¥–∞–Ω–∏–π —Ç–µ–∫—Å—Ç —É –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É.
 * @param {string} text - –¢–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.
 * @param {string} [label=''] - –©–æ —Å–∞–º–µ –∫–æ–ø—ñ—é—î—Ç—å—Å—è (–¥–ª—è toast).
 */
export function copyToClipboard(text, label = '') {
    const msg = label ? `${label} —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ` : '–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ';
    navigator.clipboard.writeText(text).then(() => {
        showToast(msg, 'success', 2000);
    }).catch(err => {
        console.error('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç: ', err);
        showToast('–ü–æ–º–∏–ª–∫–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è', 'error', 2000);
    });
}

/**
 * –û—á–∏—â—É—î —Ç–µ–∫—Å—Ç: –ø—Ä–∏–±–∏—Ä–∞—î –∑–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏, –∑–∞–º—ñ–Ω—é—î –∫–æ–º–∏ –Ω–∞ –∫—Ä–∞–ø–∫–∏ –≤ —á–∏—Å–ª–∞—Ö.
 * @param {string} text - –í—Ö—ñ–¥–Ω–∏–π —Ç–µ–∫—Å—Ç.
 * @returns {string} - –û—á–∏—â–µ–Ω–∏–π —Ç–µ–∫—Å—Ç.
 */
export function sanitizeText(text) {
    if (!text) return '';
    return text.trim().replace(/–ú–°–ú/g, "MSM").replace(/(\d+),(\d+)/g, '$1.$2');
}

// Re-export debounce from common utils for backwards compatibility
export { debounce };