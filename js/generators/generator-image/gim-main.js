// js/generators/generator-image/gim-main.js

/**
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                         IMAGE TOOL GENERATOR                              â•‘
 * â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
 * â•‘                                                                           â•‘
 * â•‘  ðŸ”’ Ð¯Ð”Ð Ðž (Ð½Ðµ Ð²Ð¸Ð´Ð°Ð»ÑÑ‚Ð¸):                                                  â•‘
 * â•‘  â”œâ”€â”€ gim-main.js      â€” Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ñƒ, Ñ€ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð°               â•‘
 * â•‘  â”œâ”€â”€ gim-plugins.js   â€” Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ñ€ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ— Ð¿Ð»Ð°Ð³Ñ–Ð½Ñ–Ð² (Ñ…ÑƒÐºÐ¸)               â•‘
 * â•‘  â”œâ”€â”€ gim-dom.js       â€” Ð’ÑÑ– DOM-ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¸ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð°                      â•‘
 * â•‘  â”œâ”€â”€ gim-state.js     â€” Ð¡Ñ‚Ð°Ð½ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð° (Ñ„Ð°Ð¹Ð»Ð¸, Ð°ÐºÑ‚Ð¸Ð²Ð½Ðµ Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð½Ñ)      â•‘
 * â•‘  â”œâ”€â”€ gim-logic.js     â€” ÐžÑÐ½Ð¾Ð²Ð½Ð° Ð»Ð¾Ð³Ñ–ÐºÐ° Ñ‚Ð° Ð¾Ð±Ñ€Ð¾Ð±Ð½Ð¸ÐºÐ¸ Ð¿Ð¾Ð´Ñ–Ð¹                â•‘
 * â•‘  â”œâ”€â”€ gim-loader.js    â€” Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½ÑŒ (Ñ„Ð°Ð¹Ð», URL, drag-drop)    â•‘
 * â•‘  â”œâ”€â”€ gim-renderer.js  â€” Ð ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³ Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½ÑŒ Ð½Ð° canvas                    â•‘
 * â•‘  â”œâ”€â”€ gim-transformer.js â€” Ð¢Ñ€Ð°Ð½ÑÑ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ— (resize, canvas)                 â•‘
 * â•‘  â”œâ”€â”€ gim-saver.js     â€” Ð—Ð±ÐµÑ€ÐµÐ¶ÐµÐ½Ð½Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñƒ                            â•‘
 * â•‘  â””â”€â”€ gim-utils.js     â€” Ð”Ð¾Ð¿Ð¾Ð¼Ñ–Ð¶Ð½Ñ– Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ—                                â•‘
 * â•‘                                                                           â•‘
 * â•‘  ðŸ”Œ ÐŸÐ›ÐÐ“Ð†ÐÐ˜ (Ð¼Ð¾Ð¶Ð½Ð° Ð²Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸):                                            â•‘
 * â•‘  â””â”€â”€ (Ð¿Ð¾ÐºÐ¸ Ð½ÐµÐ¼Ð°Ñ”)                                                         â•‘
 * â•‘                                                                           â•‘
 * â•‘  ðŸ“ ÐŸÐ Ð˜ÐœÐ†Ð¢ÐšÐ:                                                             â•‘
 * â•‘  Ð¦ÐµÐ¹ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð¼Ð°Ñ” Ñ‚Ñ–ÑÐ½Ñƒ Ñ–Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ñ–ÑŽ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ–Ð².                         â•‘
 * â•‘  Ð’ÑÑ– Ñ„Ð°Ð¹Ð»Ð¸ ÑÐ´Ñ€Ð° Ð½ÐµÐ¾Ð±Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð»Ñ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ñ–Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñƒ.                        â•‘
 * â•‘                                                                           â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

import { registerAsideInitializer } from '../../aside/aside-main.js';
import { initImageToolLogic } from './gim-logic.js';
import { runHook, getRegisteredPlugins } from './gim-plugins.js';

/**
 * ÐŸÐ»Ð°Ð³Ñ–Ð½Ð¸ Ð´Ð»Ñ Ð´Ð¸Ð½Ð°Ð¼Ñ–Ñ‡Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ.
 * ÐŸÐ¾ÐºÐ¸ Ñ‰Ð¾ Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð½Ðµ Ð¼Ð°Ñ” Ð¿Ð»Ð°Ð³Ñ–Ð½Ñ–Ð² â€” Ð²ÑÑ– Ñ„Ð°Ð¹Ð»Ð¸ Ñ” Ñ‡Ð°ÑÑ‚Ð¸Ð½Ð¾ÑŽ ÑÐ´Ñ€Ð°.
 */
const PLUGINS = [
    // './gim-some-plugin.js',
];

async function loadPlugins() {
    if (PLUGINS.length === 0) return;

    const results = await Promise.allSettled(
        PLUGINS.map(path => import(path))
    );

    results.forEach((result, index) => {
        if (result.status === 'rejected') {
        }
    });
}

async function initImageToolGenerator() {
    if (!document.getElementById('gim-image-input')) return;

    await loadPlugins();
    initImageToolLogic();
    runHook('onInit');

}

registerAsideInitializer('aside-image-tool', initImageToolGenerator);
