// js/utils/html-loader.js

/*
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                  HTML LOADER â€” Ğ—ĞĞ’ĞĞĞ¢ĞĞ–Ğ£Ğ’ĞĞ§ Ğ¨ĞĞ‘Ğ›ĞĞĞ†Ğ’                     â•‘
 * â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
 * â•‘  ğŸ› ï¸ Ğ£Ğ¢Ğ˜Ğ›Ğ†Ğ¢Ğ â€” ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğµ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ HTML-ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ–Ğ² Ğ· ĞºĞµÑˆÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼        â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

const templateCache = new Map();

/**
 * ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ÑƒÑ” HTML-Ğ²Ğ¼Ñ–ÑÑ‚ Ğ· Ñ„Ğ°Ğ¹Ğ»Ñƒ Ñ– Ğ²ÑÑ‚Ğ°Ğ²Ğ»ÑÑ” Ğ¹Ğ¾Ğ³Ğ¾ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€.
 * @param {string} url - Ğ¨Ğ»ÑÑ… Ğ´Ğ¾ HTML-Ñ„Ğ°Ğ¹Ğ»Ñƒ.
 * @param {HTMLElement} container - DOM-ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚, ĞºÑƒĞ´Ğ¸ Ğ±ÑƒĞ´Ğµ Ğ²ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ²Ğ¼Ñ–ÑÑ‚.
 */
export async function loadHTML(url, container) {
    if (!url || !container) return;

    if (templateCache.has(url)) {
        container.innerHTML = templateCache.get(url);
        return;
    }

    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`ĞĞµ Ğ²Ğ´Ğ°Ğ»Ğ¾ÑÑ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶Ğ¸Ñ‚Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½: ${response.statusText}`);
        }
        const html = await response.text();
        templateCache.set(url, html);
        container.innerHTML = html;
    } catch (error) {
        console.error(`ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ HTML Ğ· ${url}:`, error);
        container.innerHTML = `<p style="color: red;">ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ñ–.</p>`;
    }
}