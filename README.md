# Pinguin V5 - Custom Authentication Migration

–¶–µ–π –ø—Ä–æ—î–∫—Ç –±—É–ª–æ –º—ñ–≥—Ä–∞ov–∞–Ω–æ –∑ Google OAuth –Ω–∞ –≤–ª–∞—Å–Ω—É —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑ –ª–æ–≥—ñ–Ω–æ–º —Ç–∞ –ø–∞—Ä–æ–ª–µ–º.

## üöÄ –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è

### –î–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó
- ‚ùå Google OAuth (–≤—ñ–∫–Ω–∞ "Google –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è–≤ –¥–æ–¥–∞—Ç–æ–∫")
- ‚ùå API credentials –≤–∏–¥–∏–º—ñ –≤ –∫–æ–¥—ñ
- ‚ùå –ö–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞–≤ –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø

### –ü—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó
- ‚úÖ –í–ª–∞—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥—ñ–Ω/–ø–∞—Ä–æ–ª—å
- ‚úÖ –í—Å—ñ credentials –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –Ω–∞ backend (Vercel)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (admin / editor / viewer)
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –Ω–∞ —Ä—ñ–≤–Ω—ñ API

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
V4 ALL ALL/
‚îú‚îÄ‚îÄ api/                          # Backend (Vercel Functions)
‚îÇ   ‚îú‚îÄ‚îÄ auth/                     # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ verify.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hash-password.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logout.js
‚îÇ   ‚îú‚îÄ‚îÄ sheets/                   # –ü—Ä–æ–∫—Å—ñ –¥–ª—è Google Sheets
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ proxy.js
‚îÇ   ‚îî‚îÄ‚îÄ utils/                    # –£—Ç–∏–ª—ñ—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ jwt.js
‚îÇ       ‚îú‚îÄ‚îÄ google-sheets.js
‚îÇ       ‚îî‚îÄ‚îÄ cors.js
‚îú‚îÄ‚îÄ js/                           # Frontend
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ custom-auth.js        # –ù–û–í–ï: –í–ª–∞—Å–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api-client.js         # –ù–û–í–ï: API –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ index.html                    # –û–Ω–æ–≤–ª–µ–Ω–æ
‚îú‚îÄ‚îÄ entities.html                 # –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏
‚îú‚îÄ‚îÄ banned-words.html             # –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏
‚îú‚îÄ‚îÄ glossary.html                 # –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏
‚îú‚îÄ‚îÄ package.json                  # –ù–û–í–ï
‚îú‚îÄ‚îÄ vercel.json                   # –ù–û–í–ï
‚îú‚îÄ‚îÄ SETUP_INSTRUCTIONS.md         # –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
‚îî‚îÄ‚îÄ README.md                     # –¶–µ–π —Ñ–∞–π–ª
```

## ‚ö° –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (–ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)

```bash
npm install
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Google Service Account

–î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –≤ [SETUP_INSTRUCTIONS.md](./SETUP_INSTRUCTIONS.md), –∫–æ—Ä–æ—Ç–∫–æ:

1. –°—Ç–≤–æ—Ä—ñ—Ç—å Service Account –≤ Google Cloud Console
2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ JSON –∑ –∫–ª—é—á–∞–º–∏
3. –ù–∞–¥–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ Google Sheets (Share ‚Üí –¥–æ–¥–∞–π—Ç–µ email Service Account)
4. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞—Ä–∫—É—à "Users" –≤ Google –¢–∞–±–ª–∏—Ü—ñ

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Environment Variables –Ω–∞ Vercel

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables —ñ –¥–æ–¥–∞–π—Ç–µ:

- `GOOGLE_SERVICE_ACCOUNT_EMAIL` - –∑ JSON —Ñ–∞–π–ª—É
- `GOOGLE_PRIVATE_KEY` - –∑ JSON —Ñ–∞–π–ª—É
- `SPREADSHEET_ID` - ID –≤–∞—à–æ—ó —Ç–∞–±–ª–∏—Ü—ñ
- `SPREADSHEET_ID_TEXTS` - ID —Ç–∞–±–ª–∏—Ü—ñ Texts
- `JWT_SECRET` - –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –∫–ª—é—á (32+ —Å–∏–º–≤–æ–ª—ñ–≤)

### 4. –ó–∞–¥–µ–ø–ª–æ—ó—Ç–∏ –Ω–∞ Vercel

```bash
# –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –¥–æ GitHub (—è–∫—â–æ —â–µ –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ)
git add .
git commit -m "Migrate to custom auth"
git push

# Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–¥–µ–ø–ª–æ—ó—Ç—å
```

### 5. –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ö–µ—à –ø–∞—Ä–æ–ª—è

–ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –≤—ñ–¥–∫—Ä–∏–π—Ç–µ:

```
https://your-project.vercel.app/api/auth/hash-password?pwd=–≤–∞—à_–ø–∞—Ä–æ–ª—å
```

–°–∫–æ–ø—ñ—é–π—Ç–µ —Ö–µ—à —ñ –¥–æ–¥–∞–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –∞—Ä–∫—É—à "Users".

### 6. –£–≤—ñ–π—Ç–∏

–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–∞–π—Ç, –≤–≤–µ–¥—ñ—Ç—å –ª–æ–≥—ñ–Ω —Ç–∞ –ø–∞—Ä–æ–ª—å.

## üîê –†–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### admin (–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)
- –ü–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- –ú–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ
- –ú–∞—î –¥–æ—Å—Ç—É–ø –¥–æ "–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–∏—Ö —Å–ª—ñ–≤"

### editor (–†–µ–¥–∞–∫—Ç–æ—Ä)
- –ú–æ–∂–µ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ
- –ù–ï –º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ "–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–∏—Ö —Å–ª—ñ–≤"

### viewer (–ü–µ—Ä–µ–≥–ª—è–¥–∞—á)
- –¢—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥
- –ù–µ –º–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Vercel CLI
npm i -g vercel

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ
vercel dev
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

1. –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Ö–µ—à –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ `/api/auth/hash-password`
2. –î–æ–¥–∞–π—Ç–µ —Ä—è–¥–æ–∫ –≤ Google Sheets ‚Üí –∞—Ä–∫—É—à "Users"
3. –ü–æ–≤—ñ–¥–æ–º—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ª–æ–≥—ñ–Ω —Ç–∞ –ø–∞—Ä–æ–ª—å

## üìù API Endpoints

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

- `POST /api/auth/login` - –í—Ö—ñ–¥
- `GET /api/auth/verify` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
- `POST /api/auth/logout` - –í–∏—Ö—ñ–¥
- `GET /api/auth/hash-password?pwd=...` - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ö–µ—à—É

### Google Sheets Proxy

- `POST /api/sheets/proxy` - –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø—Ä–æ–∫—Å—ñ

–ü—Ä–∏–∫–ª–∞–¥:

```javascript
const response = await fetch('/api/sheets/proxy', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`,
  },
  body: JSON.stringify({
    action: 'get',
    range: 'Categories!A1:Z100',
    spreadsheetType: 'main'
  })
});
```

## üîÑ –ú—ñ–≥—Ä–∞—Ü—ñ—è —ñ–Ω—à–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫

–ù–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç –æ–Ω–æ–≤–ª–µ–Ω–æ:
- ‚úÖ index.html
- ‚úÖ main-core.js
- ‚úÖ custom-auth.js
- ‚úÖ api-client.js

–ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏:
- ‚è≥ entities.html + entities-data.js
- ‚è≥ banned-words.html + banned-words-data.js
- ‚è≥ glossary.html

–®–∞–±–ª–æ–Ω –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ `index.html` (—Ä—è–¥–∫–∏ 17-70 —ñ 107-122).

## üêõ Troubleshooting

### "Invalid username or password"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ö–µ—à –ø–∞—Ä–æ–ª—è –≤ Google Sheets
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ username —Ç–æ—á–Ω–æ —Å–ø—ñ–≤–ø–∞–¥–∞—î

### "Internal server error"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Environment Variables –Ω–∞ Vercel
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø Service Account –¥–æ Google Sheets
- –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏: Vercel Dashboard ‚Üí Functions ‚Üí Logs

### –î–∞–Ω—ñ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≤–∏ —É–≤—ñ–π—à–ª–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ console –≤ –±—Ä–∞—É–∑–µ—Ä—ñ (F12)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –≤—Å—ñ —Ñ–∞–π–ª–∏ –æ–Ω–æ–≤–ª–µ–Ω—ñ (entities-data.js —Ç–æ—â–æ)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [SETUP_INSTRUCTIONS.md](./SETUP_INSTRUCTIONS.md) - –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- [Vercel Functions Docs](https://vercel.com/docs/functions)
- [Google Sheets API](https://developers.google.com/sheets/api/guides/concepts)

## üôã –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞.

---

**–í–µ—Ä—Å—ñ—è:** 5.0.0
**–î–∞—Ç–∞ –º—ñ–≥—Ä–∞—Ü—ñ—ó:** 2025-11-12
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Backend –≥–æ—Ç–æ–≤–∏–π, Frontend —á–∞—Å—Ç–∫–æ–≤–æ –æ–Ω–æ–≤–ª–µ–Ω–æ
