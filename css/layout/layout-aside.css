/**
 * LAYOUT: Aside Panel
 *
 * ПРИЗНАЧЕННЯ:
 * Фіксована права панель з трьома станами: expanded, collapsed, closed.
 * Без overflow:hidden — діти вільно виходять за межі (expand кнопка зліва).
 * Main просто має padding-right, aside займає цей простір.
 *
 * СТРУКТУРА HTML:
 * <div class="aside-controls">
 *     <button class="btn-icon ghost aside-expand">...</button>
 *     <button class="btn-icon large rotate aside-trigger">...</button>
 * </div>
 * <aside class="aside expanded">
 *     <div class="aside-body">...</div>
 * </aside>
 * <div class="aside-fab">
 *     <div class="fab-menu">...</div>
 * </div>
 *
 * СТАНИ:
 * - .aside.expanded  — повна ширина (--panel-width-expanded)
 * - .aside.collapsed — вузька смуга (--panel-width-collapsed), тільки іконки
 * - .aside.closed    — translateX(100%), aside за екраном, trigger видимий
 *
 * АНІМАЦІЇ:
 * - aside width/transform — плавний морфінг між станами
 * - content-main padding — синхронно з aside
 * - Елементи не зникають — вони морфують (opacity, transform)
 *
 * JS: js/aside/aside-main.js
 */

/* ═══════════════════════════════════════════════════════════════════════ */
/* ASIDE — основна панель, БЕЗ overflow:hidden                          */
/* ═══════════════════════════════════════════════════════════════════════ */

.aside {
    position: fixed;
    top: calc(48px + 12px * 2);
    bottom: calc(48px + 12px * 2);
    right: 0;
    background-color: transparent;
    display: flex;
    flex-direction: column;
    width: var(--panel-width-expanded);
    z-index: 5;
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ═══════════════════════════════════════════════════════════════════════ */
/* СТАНИ                                                                  */
/* ═══════════════════════════════════════════════════════════════════════ */

.aside.collapsed {
    width: var(--panel-width-collapsed);
}

.aside.closed {
    transform: translateX(100%);
}

/* Collapsed — ховаємо текст плавно, залишаємо іконки */
.aside.collapsed .panel-item-text,
.aside.collapsed .panel-separator,
.aside.collapsed .content-line.panel input {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.aside.collapsed .aside-body {
    align-items: center;
}

.aside.collapsed .panel-item {
    width: 48px;
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Closed — body плавно зникає */
.aside.closed .aside-body {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}


/* ═══════════════════════════════════════════════════════════════════════ */
/* CONTROLS — контейнер для expand + trigger кнопок                      */
/* ═══════════════════════════════════════════════════════════════════════ */

.aside-controls {
    position: fixed;
    top: 12px;
    right: 12px;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 8px;
}

body.aside-closed .aside-expand {
    display: none;
}

/* ═══════════════════════════════════════════════════════════════════════ */
/* BODY — scrollable контент                                             */
/* ═══════════════════════════════════════════════════════════════════════ */

.aside-body {
    flex-grow: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: opacity 0.3s ease;
}

.aside-body .panel-content-scroll {
    flex-grow: 1;
    overflow-y: auto;
}

/* ═══════════════════════════════════════════════════════════════════════ */
/* FRAGMENTS — шаблони що перемикаються                                   */
/* ═══════════════════════════════════════════════════════════════════════ */

.aside-fragment,
.panel-fragment {
    display: none;
    flex-direction: column;
    flex-grow: 1;
    overflow: hidden;
    gap: var(--space-m);
    padding-right: 12px;
}

.aside-fragment.active,
.panel-fragment.active {
    display: flex;
}

.aside-fab-fragment {
    display: none;
}

.aside-fab-fragment.active {
    display: block;
}

/* ═══════════════════════════════════════════════════════════════════════ */
/* FAB — завжди видимий, fixed внизу                                     */
/* ═══════════════════════════════════════════════════════════════════════ */

.aside-fab {
    position: fixed;
    bottom: 12px;
    right: 12px;
    z-index: 10;
}

/* ═══════════════════════════════════════════════════════════════════════ */
/* PANEL CONTENT — внутрішня структура aside шаблонів                    */
/* ═══════════════════════════════════════════════════════════════════════ */

/* Верхній зафіксований блок */
.panel-content-fix {
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-s);
}

/* Центральний блок що прокручується */
.panel-content-scroll {
    flex-grow: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 2px;
    padding: 0;
    margin: 0;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.panel-content-scroll::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
}

/* Нижній зафіксований блок */
.panel-content-footer {
    flex-shrink: 0;
    margin-top: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-s);
    overflow: visible;
}

.panel-separator {
    height: 1px;
    background-color: var(--color-outline);
    margin: 4px 0;
}

.panel-info-text {
    color: var(--text-secondary);
    padding: 8px 12px;
    text-align: center;
}

.panel-info-text strong {
    color: var(--text-primary);
}


/* ═══════════════════════════════════════════════════════════════════════ */
/* BODY SYNC — margin-right для content-main                             */
/* ═══════════════════════════════════════════════════════════════════════ */

.content-main {
    transition: margin-right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

body.aside-expanded .content-main {
    margin-right: var(--panel-width-expanded);
}

body.aside-collapsed .content-main {
    margin-right: var(--panel-width-collapsed);
}

body.aside-closed .content-main {
    margin-right: var(--panel-width-collapsed);
}
