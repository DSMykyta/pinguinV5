/**
 * COMPONENT: Input Box System
 *
 * ПРИЗНАЧЕННЯ:
 * Уніфікована система для інпутних блоків.
 * Замінює: table-row-inputs.css + compound-input.css
 *
 * СТРУКТУРА:
 * ┌───────────────────────────────────────────────────────────┐
 * │ .inputs-bloc-container                                    │
 * │  ┌─────────────────────────────────────────────────────┐  │
 * │  │ .inputs-bloc                                        │  │
 * │  │  [move-btn]                                         │  │
 * │  │  ┌───────────────────────────────────────────────┐  │  │
 * │  │  │ .inputs-line                                  │  │  │
 * │  │  │  ┌────────────────┐   ┌────────────────────┐  │  │  │
 * │  │  │  │ .input-box     │ | │ .input-box          │  │  │  │
 * │  │  │  │  [input]       │ . │  [input] [input-tag]│  │  │  │
 * │  │  │  │  .large        │ s │  .small             │  │  │  │
 * │  │  │  └────────────────┘ v └────────────────────┘  │  │  │
 * │  │  └───────────────────────────────────────────────┘  │  │
 * │  │  [btn-icon] [btn-icon]                              │  │
 * │  └─────────────────────────────────────────────────────┘  │
 * └───────────────────────────────────────────────────────────┘
 *
 * РОЗМІРИ INPUT-BOX:
 * - (без класу) — flex: 1 (мінімальний / 100% якщо один)
 * - .small      — flex: 2 (середній)
 * - .large      — flex: 4 (максимальний)
 *
 * КЛАСИ ВІЗУАЛІЗАЦІЇ (додаються JS на .inputs-bloc):
 * - .td        — звичайний рядок таблиці
 * - .th        — заголовок (світло-сірий фон)
 * - .th-strong — сильний заголовок (сірий фон, жирний)
 * - .bold      — жирний текст
 * - .italic    — курсив
 * - .h2        — великий заголовок (18px, ховає малі input-box)
 * - .colspan2  — об'єднання колонок (ховає малі input-box)
 * - .single    — одна колонка (ховає малі input-box)
 * - .new-table — розділювач таблиць (невидимий)
 * - .added     — доданий рядок (акцентний колір)
 *
 * ЗАЛЕЖНОСТІ:
 * - root.css (--color-outline, --color-on-surface, --color-main, --color-accent, etc.)
 * - helpers.css (.separator-v)
 */


/* ============================================ */
/* КОНТЕЙНЕР ДЛЯ РЯДКІВ                        */
/* ============================================ */

.inputs-bloc-container {
    display: flex;
    flex-direction: column;
    gap: 0;
}

/* Варіант з відступами між рядками (для форм) */
.inputs-bloc-container.spaced {
    gap: 8px;
}

/* Пусте повідомлення */
.inputs-bloc-container .empty-state-container {
    padding: 24px;
    text-align: center;
    color: var(--color-on-surface-v);
    font-size: 14px;
}

.inputs-bloc-empty {
    padding: 16px;
    text-align: center;
    color: var(--color-on-surface-v);
    background: var(--color-surface-c-low);
    border-radius: var(--radius-xs);
}


/* ============================================ */
/* РЯДОК                                       */
/* ============================================ */

.inputs-bloc {
    display: flex;
    align-items: center;
    gap: 8px;
}

.inputs-bloc .material-symbols-outlined {
    font-size: 20px;
}


/* ============================================ */
/* INPUTS-LINE (обрамлений контейнер)          */
/* ============================================ */

.inputs-line {
    display: flex;
    flex-direction: row;
    align-items: center;
    width: 100%;
    border: 1px solid var(--color-outline);
    transition: border-radius 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.inputs-line:hover {
    border-color: var(--color-on-surface-v);
}

.inputs-line:focus-within {
    outline: 1px solid var(--color-main);
    outline-offset: -2px;
    border-color: transparent;
}


/* ============================================ */
/* INPUT-BOX (прозорий, тримає input + stuff)  */
/* ============================================ */

.input-box {
    display: flex;
    align-items: center;
    flex: 1;
}

.input-box.large {
    flex: 4;
}

.input-box.small {
    flex: 2;
}


/* ============================================ */
/* ПОЛЯ ВВЕДЕННЯ                               */
/* ============================================ */

.inputs-bloc input,
.inputs-bloc textarea,
.inputs-bloc select {
    font-size: 14px;
    border: none;
    padding: 0 4px;
    background-color: transparent;
    width: 100%;
    resize: vertical;
    font-family: inherit;
    color: var(--color-on-surface);
}

.inputs-bloc input,
.inputs-bloc select {
    height: 40px;
}

.inputs-bloc textarea {
    padding: 10px 8px 0 4px;
    min-height: 40px;
}


/* ============================================ */
/* INPUT TAG (індикатор всередині input-box)   */
/* ============================================ */

.input-tag {
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: var(--color-main);
    background-color: var(--color-main-c);
    padding: 4px 8px;
    border-radius: 16px;
    margin-right: 4px;
    flex-shrink: 0;
}

.input-tag.visible {
    display: flex;
}

/* Незамінна амінокислота */
.input-tag.essential-amino {
    background-color: var(--color-warning-c);
    color: var(--color-warning);
}


/* ============================================ */
/* ВІЗУАЛІЗАЦІЯ РЯДКІВ                         */
/* ============================================ */

/* Злиття borders між td рядками */
.inputs-bloc.td + .inputs-bloc.td .inputs-line {
    margin-top: -1px;
}

/* Для flexbox контейнерів — прибираємо верхній border */
.inputs-bloc-container > .inputs-bloc.td + .inputs-bloc.td .inputs-line {
    border-top: none;
}

/* Звичайний рядок */
.td .inputs-line {
    background-color: transparent;
}

/* Заголовок (світлий) */
.th .inputs-line {
    background-color: var(--color-surface-c-low);
}

/* Заголовок (темніший, жирний) */
.th-strong .inputs-line {
    background-color: var(--color-surface-c);
}

/* H2 — без рамки */
.h2 .inputs-line {
    border: none;
    padding: 8px 0;
}


/* ============================================ */
/* СТИЛІ ТЕКСТУ                                */
/* ============================================ */

.inputs-bloc.italic input,
.inputs-bloc.italic textarea {
    font-style: italic;
}

.inputs-bloc.bold input,
.inputs-bloc.bold textarea,
.inputs-bloc.th-strong input,
.inputs-bloc.th-strong textarea {
    font-weight: 700;
}

.inputs-bloc.added input,
.inputs-bloc.added textarea {
    color: var(--color-accent);
}

/* Великий заголовок H2 */
.inputs-bloc.h2 .input-box input {
    font-size: 18px;
    font-weight: 600;
}


/* ============================================ */
/* ПРИХОВУВАННЯ МАЛИХ INPUT-BOX                */
/* ============================================ */

:is(.h2, .single, .colspan2) .input-box.small,
:is(.h2, .single, .colspan2) > .inputs-line > .separator-v {
    display: none;
}


/* ============================================ */
/* РОЗДІЛЮВАЧ ТАБЛИЦЬ                          */
/* ============================================ */

.new-table .inputs-line {
    visibility: hidden;
}


/* ============================================ */
/* BORDER RADIUS — БАЗОВІ ПРАВИЛА              */
/* ============================================ */

/* За замовчуванням всі рядки без заокруглення */
.inputs-bloc .inputs-line {
    border-radius: 0;
}


/* ============================================ */
/* BORDER RADIUS — ПОЧАТОК І КІНЕЦЬ ГРУП       */
/* ============================================ */

/* ПОЧАТОК ГРУПИ (верх заокруглений) */

/* Перший рядок контейнера */
.inputs-bloc:first-child:not(.new-table):not(.h2) .inputs-line {
    border-radius: 8px 8px 0 0;
}

/* Рядок після розділювача */
.inputs-bloc.new-table + .inputs-bloc:not(.new-table):not(.h2) .inputs-line,
.inputs-bloc.h2 + .inputs-bloc:not(.new-table):not(.h2) .inputs-line {
    border-radius: 8px 8px 0 0;
}

/* КІНЕЦЬ ГРУПИ (низ заокруглений) */

/* Останній рядок контейнера */
.inputs-bloc:last-child:not(.new-table):not(.h2) .inputs-line {
    border-radius: 0 0 8px 8px;
}

/* Рядок перед розділювачем */
.inputs-bloc:not(.new-table):not(.h2):has(+ .inputs-bloc.new-table) .inputs-line,
.inputs-bloc:not(.new-table):not(.h2):has(+ .inputs-bloc.h2) .inputs-line {
    border-radius: 0 0 8px 8px;
}


/* ============================================ */
/* BORDER RADIUS — ЄДИНИЙ РЯДОК                */
/* ============================================ */

/* Єдиний рядок в контейнері */
.inputs-bloc:only-child:not(.new-table):not(.h2) .inputs-line {
    border-radius: 8px;
}

/* Єдиний рядок між двома розділювачами */
.inputs-bloc.new-table + .inputs-bloc:not(.new-table):not(.h2):has(+ .inputs-bloc.new-table) .inputs-line,
.inputs-bloc.new-table + .inputs-bloc:not(.new-table):not(.h2):has(+ .inputs-bloc.h2) .inputs-line,
.inputs-bloc.h2 + .inputs-bloc:not(.new-table):not(.h2):has(+ .inputs-bloc.new-table) .inputs-line,
.inputs-bloc.h2 + .inputs-bloc:not(.new-table):not(.h2):has(+ .inputs-bloc.h2) .inputs-line {
    border-radius: 8px;
}

/* Після розділювача і є останнім */
.inputs-bloc.new-table + .inputs-bloc:last-child:not(.new-table):not(.h2) .inputs-line,
.inputs-bloc.h2 + .inputs-bloc:last-child:not(.new-table):not(.h2) .inputs-line {
    border-radius: 8px;
}

/* Першим і перед розділювачем */
.inputs-bloc:first-child:not(.new-table):not(.h2):has(+ .inputs-bloc.new-table) .inputs-line,
.inputs-bloc:first-child:not(.new-table):not(.h2):has(+ .inputs-bloc.h2) .inputs-line {
    border-radius: 8px;
}


/* ============================================ */
/* ТЕКСТОВИЙ РЕЖИМ (для related items)         */
/* ============================================ */

/* Назва елемента */
.inputs-bloc .item-name {
    font-size: 14px;
    padding: 0 4px;
    height: 40px;
    display: flex;
    align-items: center;
    color: var(--color-on-surface);
}

/* ID елемента */
.inputs-bloc .item-id {
    font-size: 12px;
    padding: 0 4px;
    height: 40px;
    display: flex;
    align-items: center;
    color: var(--color-on-surface-v);
    font-family: var(--font-mono);
}
