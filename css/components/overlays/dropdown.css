/* css/components/overlays/dropdown.css */
/* Уніфікована dropdown система з portal-позиціонуванням */

/* ============================================ */
/* WRAPPER                                      */
/* ============================================ */

.dropdown-wrapper {
    position: relative;
    display: inline-flex;
    align-items: center;
    overflow: visible;
}

/* ============================================ */
/* PANEL (спадне меню)                          */
/* ============================================ */

.dropdown-panel {
    display: none;
    min-width: 200px;
    background-color: var(--color-surface-c-low);
    border-radius: var(--radius-s);
    box-shadow: var(--shadow-2);
    padding: 4px;
    border: 1px solid var(--color-outline);
    z-index: 10000;

    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.15s ease-out, transform 0.15s ease-out;
}

/* Відкритий стан — на wrapper (для CSS-only fallback) і на panel (portal в body) */
.dropdown-wrapper.open .dropdown-panel,
.dropdown-panel.open {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* Відкриття вгору */
.dropdown-wrapper.open-upward .dropdown-panel,
.dropdown-panel.open-upward {
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15);
}

/* ============================================ */
/* OPTION (елемент меню)                        */
/* ============================================ */

.dropdown-option {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 8px;
    width: 100%;
    padding: 8px 16px;
    background: none;
    border: none;
    cursor: pointer;
    text-align: left;
    border-radius: 4px;
    color: var(--color-on-surface);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: background-color 0.15s ease-out;
}

.dropdown-option:hover {
    background-color: var(--color-main-c);
    color: var(--color-main);
}

.dropdown-option:active {
    background-color: var(--color-main-c-high);
}

.dropdown-option.active {
    background-color: var(--color-main-c);
    color: var(--color-main);
}

/* ============================================ */
/* РОЗДІЛЮВАЧ                                   */
/* ============================================ */

.dropdown-panel .panel-separator {
    height: 1px;
    background-color: var(--color-outline);
    margin: 4px 0;
}

.dropdown-separator {
    height: 1px;
    background-color: var(--color-outline-v);
    margin: 4px 8px;
}

/* ============================================ */
/* HEADER / BODY / SEARCH                       */
/* ============================================ */

.dropdown-header {
    padding: 8px 12px;
    color: var(--color-on-surface-variant);
    text-transform: uppercase;
}

.dropdown-body {
    display: flex;
    flex-direction: column;
    gap: 2px;
    max-height: 300px;
    overflow-y: auto;
}

.dropdown-search {
    padding: 4px 8px 0;
}

/* ============================================ */
/* TABLE COLUMN FILTERS                         */
/* ============================================ */

.filter-dropdown {
    margin-left: auto;
    flex-shrink: 0;
}

.filter-dropdown .btn-filter {
    width: 24px;
    height: 24px;
    min-width: 24px;
    padding: 0;
    opacity: 0.5;
    transition: opacity 0.15s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.filter-dropdown .btn-filter .material-symbols-outlined {
    font-size: 18px;
}

.filter-dropdown .btn-filter:hover {
    opacity: 1;
}

.filter-dropdown .dropdown-panel {
    z-index: 10001;
    min-width: 280px;
    max-width: 400px;
}

.filter-dropdown .dropdown-option {
    white-space: normal;
    overflow: visible;
    text-overflow: unset;
}

.filter-dropdown .btn-filter.filtered {
    opacity: 1;
    color: var(--color-main);
}

.filter-dropdown .btn-filter.filtered .material-symbols-outlined {
    font-variation-settings: 'FILL' 1;
}

/* ============================================ */
/* HOVER FILTER DROPDOWN                        */
/* ============================================ */

.filter-dropdown-hover {
    pointer-events: none;
}

.filter-dropdown-hover .dropdown-panel {
    display: block;
    opacity: 0;
    transform: translateY(-8px);
    pointer-events: none;
    transition: opacity 0.2s ease-out, transform 0.2s ease-out;
    z-index: 10001;
}

.filter-dropdown-hover.open .dropdown-panel {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.sortable-header.filterable.filter-hover-active {
    background-color: var(--color-surface-c-high);
}

.sortable-header.filterable {
    cursor: pointer;
}

.filter-select-all {
}

.filter-count {
    margin-left: auto;
    color: var(--color-on-surface-v);
    background: var(--color-surface-c);
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 20px;
    text-align: center;
}
