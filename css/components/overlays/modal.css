/**
 * COMPONENT: Modal Base
 *
 * ПРИЗНАЧЕННЯ:
 * Базова структура модальних вікон - overlay, container, header, body, footer.
 *
 * ВИКОРИСТАННЯ:
 * <div class="modal-overlay" data-modal-id="example">
 *   <div class="modal-container modal-medium">
 *     <header class="modal-header">
 *       <h2 class="modal-title">Заголовок</h2>
 *       <div class="modal-header-actions">...</div>
 *     </header>
 *     <div class="modal-body">...</div>
 *   </div>
 * </div>
 *
 * ЗАЛЕЖНОСТІ:
 * - root.css (CSS змінні)
 *
 * ПОВ'ЯЗАНІ ФАЙЛИ:
 * - modal-sizes.css (розміри: small, medium, large)
 * - modal-fullscreen.css (повноекранні модалі)
 * - modal-avatar.css (модалі з аватарами)
 * - modal-content.css (специфічний контент)
 */

/* ============================================
   BODY STATE
   ============================================ */

body.modal-open {
    overflow: hidden;
}

/* ============================================
   MODAL OVERLAY
   ============================================ */

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100dvh;
    background-color: var(--color-modal-overlay);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;

    /* Анімація появи */
    opacity: 0;
    visibility: hidden;
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
    transition: opacity 0.2s ease, visibility 0s 0.2s linear, backdrop-filter 0.2s ease;
}

.modal-overlay.open {
    opacity: 1;
    visibility: visible;
    transition-delay: 0s;
    backdrop-filter: var(--blur-s);
    -webkit-backdrop-filter: var(--blur-s);
}

/* ============================================
   MODAL CONTAINER
   ============================================ */

.modal-container {
    background-color: var(--color-surface-c-low);
    border-radius: var(--radius-l);
    box-shadow: var(--shadow-2);
    width: 70vw;
    max-height: 90dvh;
    display: flex;
    flex-direction: column;
    transform: scale(0.95);
    transition: transform 0.2s ease;
    overflow: visible;
}

.modal-overlay.open .modal-container {
    transform: scale(1);
}

/* Legacy: старий контейнер */
.modal-content {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-height: 90dvh;
}

/* ============================================
   MODAL HEADER
   ============================================ */

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-m) var(--space-l);
    border-bottom: 1px solid var(--color-outline);
    flex-shrink: 0;
}

/* Заголовок з іконкою */
.modal-title-container {
    display: flex;
    align-items: center;
    gap: 12px;
}

.modal-title-container .material-symbols-outlined {
    font-size: 24px;
    color: var(--color-main);
}

/* Приховані джерела заголовку (для динамічного контенту) */
.modal-title-source,
.modal-header-actions-source {
    display: none !important;
}

/* ============================================
   MODAL HEADER ACTIONS
   ============================================ */



/* ============================================
   MODAL BODY
   ============================================ */

.modal-body {
    padding: var(--space-l);
    overflow-y: auto;
    overflow-x: visible;
    flex-grow: 1;
}

/* ============================================
   MODAL FOOTER
   ============================================ */

.modal-footer {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 12px;
    padding: var(--space-l);
    padding-top: var(--space-m);
    flex-shrink: 0;
}

.modal-footer:empty {
    display: none;
}

/* Центровані кнопки для confirm-модалів */
.modal-footer.modal-footer-confirm {
    justify-content: center;
}

/* ============================================
   MODAL FORM
   ============================================ */

.modal-form {
    display: flex;
    flex-direction: column;
}

/* Textarea в модалі */
.modal-textarea {
    width: 100%;
    min-height: 120px;
    padding: 12px;
    border: 1px solid var(--color-outline);
    border-radius: 8px;
    font-family: inherit;
    resize: vertical;
    transition: border-color 0.2s;
}

.modal-textarea:focus {
    outline: none;
    border-color: var(--color-main);
}


