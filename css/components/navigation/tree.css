/* css/components/navigation/tree.css */

/**
 * COMPONENT: Tree
 *
 * ПРИЗНАЧЕННЯ:
 * Універсальний компонент дерева з чекбоксами для ієрархічного вибору.
 *
 * ВИКОРИСТАННЯ:
 * Wizard імпорту, вибір категорій/характеристик з вкладеністю.
 *
 * HTML ПРИКЛАД:
 * <div class="tree-container">
 *   <div class="tree-node tree-node-category">
 *     <div class="tree-node-header">
 *       <div class="tree-expand-icon"><span class="material-symbols-outlined">chevron_right</span></div>
 *       <label class="tree-checkbox"><input type="checkbox"></label>
 *       <span class="tree-node-label">Категорія</span>
 *       <span class="tree-node-count">12</span>
 *     </div>
 *     <div class="tree-node-children tree-collapsed">
 *       <div class="tree-node tree-node-leaf">
 *         <div class="tree-node-header">
 *           <label class="tree-checkbox"><input type="checkbox"></label>
 *           <span class="tree-node-label">Елемент</span>
 *         </div>
 *       </div>
 *     </div>
 *   </div>
 * </div>
 *
 * КЛАСИ:
 * - .tree-container - обгортка з прокруткою
 * - .tree-node - вузол дерева
 * - .tree-node-header - заголовок вузла (expand + checkbox + label)
 * - .tree-node-children - контейнер дочірніх елементів
 * - .tree-node-leaf - вузол без дітей (з відступом)
 * - .tree-collapsed / .tree-expanded - стан згортання
 * - .tree-expand-icon - іконка розгортання
 * - .tree-checkbox - чекбокс
 * - .tree-node-label - текст вузла
 * - .tree-node-type - тип елемента (бейдж)
 * - .tree-node-count - лічильник елементів
 *
 * МОДИФІКАТОРИ:
 * - .tree-node-category - вузол категорії
 * - .tree-node-characteristic - вузол характеристики
 * - .tree-node-global - глобальний елемент (виділення)
 *
 * ЗАЛЕЖНОСТІ:
 * - root.css (кольори, радіуси)
 */

/* ============================================ */
/* КОНТЕЙНЕР                                    */
/* ============================================ */

.tree-container {
    max-height: 400px;
    overflow-y: auto;
    border: 1px solid var(--color-outline);
    border-radius: var(--radius-s);
    background: var(--color-surface);
}

.tree-empty {
    padding: 32px;
    text-align: center;
    color: var(--color-on-surface-v);
}

/* ============================================ */
/* ВУЗОЛ ДЕРЕВА                                 */
/* ============================================ */

.tree-node {
    border-bottom: 1px solid var(--color-outline-v);
}

.tree-node:last-child {
    border-bottom: none;
}

/* Заголовок вузла */
.tree-node-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    cursor: pointer;
    transition: background-color 0.1s ease;
}

.tree-node-header:hover {
    background-color: var(--color-surface-c);
}

/* Leaf без дітей - з відступом */
.tree-node-leaf .tree-node-header {
    padding-left: 44px;
}

/* ============================================ */
/* ІКОНКА РОЗГОРТАННЯ                           */
/* ============================================ */

.tree-expand-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.tree-expand-icon:hover {
    color: var(--color-on-surface);
}

.tree-expand-icon .material-symbols-outlined {
    font-size: 20px;
    color: var(--color-on-surface-v);
    transition: transform 0.2s ease;
}

.tree-expand-icon.expanded .material-symbols-outlined {
    transform: rotate(90deg);
}

/* ============================================ */
/* ЧЕКБОКС                                      */
/* ============================================ */

.tree-checkbox {
    display: flex;
    align-items: center;
    cursor: pointer;
}

/* Стилі checkbox — глобальні, у checkbox.css */

/* ============================================ */
/* ТЕКСТ ТА БЕЙДЖІ                              */
/* ============================================ */

.tree-node-label {
    flex: 1;
    color: var(--color-on-surface);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.tree-node-type {
    padding: 2px 6px;
    background: var(--color-surface-c);
    border-radius: 4px;
    color: var(--color-on-surface-v);
}

.tree-node-count {
    color: var(--color-on-surface-v);
    padding: 2px 8px;
    background: var(--color-surface-c);
    border-radius: 10px;
    white-space: nowrap;
}

/* ============================================ */
/* ДОЧІРНІ ЕЛЕМЕНТИ                             */
/* ============================================ */

.tree-node-children {
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transition: max-height 0.15s ease-in, opacity 0.1s ease-in;
}

.tree-node-children.tree-expanded {
    max-height: 1000px;
    opacity: 1;
    background: var(--color-surface-c-low);
    transition: max-height 0.4s ease-out, opacity 0.2s ease-out;
}

/* ============================================ */
/* МОДИФІКАТОРИ ТИПІВ                           */
/* ============================================ */

/* Категорія */
.tree-node-category > .tree-node-header {
    background: var(--color-surface);
}

/* Глобальні характеристики */
.tree-node-global > .tree-node-header {
    background: var(--color-warning-c);
}

/* Характеристика всередині категорії */
.tree-node-characteristic > .tree-node-header {
    padding-left: 44px;
}

/* ============================================ */
/* ТУЛБАР ДЛЯ ДЕРЕВА                            */
/* ============================================ */

.tree-toolbar {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--color-outline-v);
}

/* ============================================ */
/* SUMMARY ВИБОРУ                               */
/* ============================================ */

.tree-selection-summary {
    display: flex;
    gap: 24px;
    padding: 16px;
    margin-top: 16px;
    background: var(--color-main-c);
    border-radius: var(--radius-s);
}

.tree-summary-item {
    display: flex;
    gap: 8px;
    align-items: center;
}

.tree-summary-label {
    color: var(--color-on-surface-v);
}

.tree-summary-value {
    color: var(--color-main);
}
